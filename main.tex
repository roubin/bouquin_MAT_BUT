\documentclass[a4paper, french, 11pt, openright, fleqn]{book} 

%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[francais]{babel}

\usepackage[
  paperwidth = 190mm,
  paperheight = 240mm,
  includehead,
  textwidth = 130mm,
  %textheight = 205mm,
  top = 17.5mm,
  bottom = 17.5mm,
  marginparsep = 0pt,
  marginparwidth = 0pt,
  showframe = false,
  showcrop = true
]{geometry}

\usepackage[cross, center, a4, cam, noinfo]{crop}

\usepackage[fleqn]{mathtools}
\usepackage{framed}       % pour les environnement d'exo et sol
\usepackage{amsthm}       % pour spaceabove par exemple
\usepackage{thmtools}     % utilisé dans l'environnement des exo / sol
\usepackage{fancybox}     % utilisé dans l'environnement des exo / sol
\usepackage{multicol}     % passe en 2 colonnes quelques fois
\usepackage{cancel}       % pour barrer des termes dans les équations
\usepackage[fleqn]{mathtools}
\usepackage{wrapfig}      %
\usepackage{tikz}         % pour faire tous les schémas
\usepackage{pgfplots}     %
\usetikzlibrary{patterns} % UTILE ?????
\usetikzlibrary{tikzmark} % les flèches de relation dans quelques équations
\usetikzlibrary{arrows.meta} % grosse flèche du schéma en préamble
\input{drawingTool}       % des outils pour faire les schémas en mécanique des structures
\usepackage{enumitem}     % régler certain espacements dans les listes
\usepackage{adjustbox}    % pour mieux centrer (verticalement)
\usepackage[tikz]{bclogo} % les encadrés avec attention ou lampe
\usepackage{graphicx}     %
%\usepackage{amsmath}	  % already load by mathtools
\usepackage{amssymb}      % pour curvearrowright par exemple
\usepackage{bm}           % certain symboles en gras
\usepackage{array}        % pour pouvoir center les cellules de tabular
\usepackage{vwcol}        %
\usepackage{booktabs}     %
\usepackage{tasks}        % liste de tâches pour les exercices
\usepackage{needspace}    % ajustement des changements de page
\usepackage{pifont}       % des symbols graphiques
%\usepackage{fontawesome5} % d'autres symbols
\usepackage{siunitx}      % système d'unité pour écrire les nombres avec leurs unités
\usepackage{pdfpages}     % insertion des catalogues en annexe
\usepackage{mathabx}      % pour widecheck
\usepackage{comment}      % nécessaire pendant la phase de rédaction
\usepackage{footnote}     % nécessaire pour le 'savenotes'
\usepackage{titlepic}     % juste pour avoir une image sur la page de garde
\usepackage{mathabx}      % certain symbols
\usepackage[normalem]{ulem} % souligner
\usepackage{ragged2e}       % gestion des espaces
\usepackage{emptypage}    % Pour supprimer les en-têtes et pieds de page des pages blanches
\usepackage{fancyhdr}
\usepackage{imakeidx}
\usepackage{esvect}

%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pagestyle{fancy}
\fancyhf{} % Supprime les en-têtes et pieds de page par défaut
\fancyhead[LE,RO]{\thepage} % Numéro de page à gauche sur les pages paires, à droite sur les pages impaires
\fancyhead[RE]{\leftmark} % Titre du chapitre à droite sur les pages paires
\fancyhead[LO]{\rightmark} % Titre de la section à gauche sur les pages impaires
\fancyfoot{} % Supprime tout contenu dans le pied de page
\renewcommand{\headrulewidth}{0.4pt} % Ligne sous l'en-tête
\renewcommand{\footrulewidth}{0pt} % Pas de ligne au-dessus du pied de page

% Redéfinir le style plain pour supprimer les numéros de page sur les premières pages de chapitre
\fancypagestyle{plain}{
    \fancyhf{} % Supprime les en-têtes et pieds de page par défaut
    \fancyfoot{} % Supprime tout contenu dans le pied de page
    \renewcommand{\headrulewidth}{0pt} % Pas de ligne sous l'en-tête
    \renewcommand{\footrulewidth}{0pt} % Pas de ligne au-dessus du pied de page
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{pgfplots}
\pgfplotsset{width=6cm, compat = newest}
\usepgfplotslibrary{fillbetween}

% Style personnalisé pour les graphiques (2D)
\pgfplotsset{
    mathbook/.style={
        width=0.8\textwidth, % Largeur du graphique
        height=6cm, % Hauteur du graphique
        axis lines=middle, % Axes centrés
        axis line style={->,>=stealth}, % Style des flèches
        xlabel={$x$}, % Label de l'axe x
        ylabel={$y$}, % Label de l'axe y
        xlabel style={below right}, % Position du label x
        ylabel style={above left}, % Position du label y
        grid=both, % Afficher la grille
        grid style={dashed,gray!30}, % Style de la grille
        tick style={black,thick}, % Style des graduations
        legend style={at={(1,1)},anchor=north east}, % Position de la légende
        samples=200, % Nombre de points pour le tracé
        thick, % Épaisseur des courbes
        smooth, % Lissage des courbes
        clip=false, % Permet d'afficher les labels hors de la zone de tracé
    }
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\newcommand{\repereDebut}{\raisebox{-0.3ex}{\ding{229}~}}
%\newcommand{\xx}{\mathbf{x}}

\newcommand{\centeredcircled}[1]{%
  \raisebox{.5pt}{\textcircled{\raisebox{-.9pt}{#1}}}%
}

\renewcommand{\thefootnote}{\fnsymbol{footnote}}

\sisetup{
output-decimal-marker = {,},
unit-mode = text,
%inter-unit-product = \ensuremath{{\!}$\cdot${\!}},
inter-unit-product = \ensuremath{\mathbin{\cdot}},
retain-explicit-plus
}

%%%%%%%
\makeatletter
\newcommand*{\underarrow}{\def\@underarrow{\relax}\@ifstar{\@@underarrow}{\def\@underarrow{\hidewidth}\@@underarrow}}
\newcommand*{\@@underarrow}[2][]{\underset{\@underarrow\substack{\uparrow\if\relax\detokenize{#1}\relax\else\\#1\fi}\@underarrow}{#2}}

\newcommand*{\overarrow}{\def\@overarrow{\relax}\@ifstar{\@@overarrow}{\def\@overarrow{\hidewidth}\@@overarrow}}
\newcommand*{\@@overarrow}[2][]{\overset{\@overarrow\substack{\if\relax\detokenize{#1}\relax\else#1\\\fi\downarrow}\@overarrow}{#2}}
\makeatother
%%%%%%%

\usepackage{hyperref}
\hypersetup{
    bookmarks=true,
    bookmarksopen=false,
    colorlinks=true,
    linkcolor=blue,
    urlcolor=blue,
    linktocpage=true,
    pdftitle={Outils Mathématiques},
    pdfpagemode=FullScreen,
    pdfauthor={V. Richefeu},
    pdfstartpage=1,
}

\newcommand{\dd}{\mathrm{d}} % le "d droit" pour les différentielles
\newcommand{\superpo}{\stackrel{\scriptscriptstyle\text{sup}}{\oplus}}

\definecolor{mygreen}{rgb}{0.0, 0.5, 0.0}

%%%%%%%%%
\newenvironment{myleftbar}{%
\def\FrameCommand{\hspace{-0.2em}\vrule width 3pt\hspace{0.2em}}%
\MakeFramed{\advance\hsize-\width \FrameRestore}}%
{\endMakeFramed}

\newenvironment{myleftbarGray}{%
\def\FrameCommand{{\color{black!50}\hspace{-0.2em}\vrule width 3pt\hspace{0.2em}}}%
\MakeFramed{\advance\hsize-\width \FrameRestore}}%
{\endMakeFramed}

\newenvironment{myleftbarSol}{%
\def\FrameCommand{{\color{black!50}\hspace{-0.2em}\vrule width 2pt\hspace{0.2em}}}%
\MakeFramed{\advance\hsize-\width \FrameRestore}}%
{\endMakeFramed}

\declaretheoremstyle[
spaceabove = 6pt,
spacebelow = 6pt,
headfont = \normalfont\bfseries,
postheadspace = 0pt,
headindent = 0pt,
headpunct = {},
headformat = {\cornersize*{2pt}\ovalbox{\NAME~\NUMBER\ifstrequal{\NOTE}{}{\relax}{\NOTE}}},
%headformat={\cornersize*{2pt}\ovalbox{\NAME~\NUMBER\ifstrequal{\NOTE}{}{\relax}{\NOTE}}\hspace{1em}}, 
bodyfont = \normalfont,
]{exobreak}

\declaretheorem[style=exobreak, name={%
\raisebox{-2mm}{\includegraphics[height=7mm]{figs/hard-working-icon-6.jpg}}%
\hspace*{2mm}Exercice},%
postheadhook = \leavevmode\myleftbar,%
prefoothook  = \endmyleftbar]{exo}

\declaretheorem[style=exobreak, name={%
\raisebox{-2mm}{\includegraphics[height=7mm]{figs/solution-icon-png-5.jpg}}%
\hspace*{2mm}Correction de l'exercice},%
postheadhook = \leavevmode\myleftbarGray,%
prefoothook = \endmyleftbarGray]{sol}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\parskip=2pt % petit espace vertical entre les paragraphes

\title{Outils et méthodes en mathématiques\\
\vspace*{1cm}
\large Un guide pratique à l’usage des étudiants du BUT GCCD}
\author{Vincent~\textsc{Richefeu}, Emmanuel~\textsc{Roubin}}
\date{\today}
%\titlepic{\includegraphics[width=0.99\textwidth]{figs/progression_contrasted.jpg}}

\setcounter{tocdepth}{1}

\begin{document}

% Activer le mode raggedbottom pour permettre un espacement flexible en bas de page
\raggedbottom

\maketitle

\frontmatter

\input{avant_propos}

\tableofcontents

\mainmatter

% Une moyenne de 30 pages par chapitre

% MAT1
\input{chapter_Trigo} % en cours d'écriture
\input{chapter_Vecteurs} % en cours d'écriture
\input{chapter_Geometrie_spatiale} % dans MAT4 à Grenoble

% MAT2
\input{chapter_Etude_fonctions} % à faire
\input{chapter_Integration} % à faire

% MAT3
\input{chapter_Calcul_matriciel} % sur la base du cours de Manu
\input{chapter_EDO} % sur la base du cours de Manu

% MAT4
\input{chapter_Fonctions_2var} % cours Manu + cours Vincent
\input{chapter_Calcul_erreurs} % cours Manu + cours Vincent

% MAT5 ?

% Python ?

%\input{appendix}

\end{document}
